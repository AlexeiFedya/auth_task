{"version":3,"sources":["context/Auth.context.js","hooks/http.hooks.js","components/loader/loader.js","components/profile-card/ProfileCard.js","pages/profile/Profile.js","components/pop-up/pop-up.js","pages/login/Login.js","components/header/Header.js","components/app/App.js","hooks/auth.hooks.js","components/routes/routes.js","index.js"],"names":["zero","AuthContext","createContext","token","login","logout","isAuthenticated","useHttp","useState","loading","setLoading","error","setError","request","useCallback","url","a","method","body","headers","console","log","JSON","stringify","fetch","response","json","data","ok","Error","message","clearError","Loader","className","ProfileCard","profile","name","email","Profile","useContext","setProfile","getProfile","Authorization","useEffect","PopUp","popUpHandleClick","ifError","onClick","Login","auth","validationSchema","yup","shape","required","password","min","initialValues","validateOnBlur","onSubmit","values","clientId","accessToken","errors","handleChange","handleBlur","isValid","handleSubmit","type","value","id","placeholder","onChange","onBlur","htmlFor","disabled","Header","logoutHandler","success","to","App","setToken","storageName","localStorage","setItem","removeItem","parse","getItem","useAuth","routes","path","exact","useRoutes","Provider","ReactDOM","render","basename","document","getElementById"],"mappings":"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","file":"static/js/main.40ce4304.chunk.js","sourcesContent":["import { createContext } from 'react';\r\n\r\nfunction zero () {}\r\n\r\n\r\nexport const AuthContext = createContext({\r\n    token: null,\r\n    login: zero,\r\n    logout: zero,\r\n    isAuthenticated: false,\r\n})","import {useState, useCallback} from 'react';\r\n\r\nexport const useHttp = () => {\r\n    const [loading, setLoading] = useState(false)\r\n    const [error, setError] = useState(null)\r\n\r\n\r\n    const request = useCallback( async (url, method = 'GET', body = null, headers = {}) => {\r\n        setLoading(true)\r\n\r\n\r\n        try {\r\n            console.log(\"bodyyy\",body)\r\n            if (body) {\r\n                // const {email, password} = body\r\n                body = JSON.stringify(body)\r\n                headers['Content-Type'] = 'application/json';\r\n            }\r\n            \r\n            // const tok = JSON.parse(localStorage.getItem(\"accessToken\"));\r\n            // if (tok && tok.token) {\r\n            //     const access_token = tok.token\r\n            //     headers['Authorization'] = `Bearer ${access_token}`;\r\n            // }\r\n\r\n\r\n            const response = await fetch(url, {method, body, headers})\r\n            const data = await response.json()\r\n            \r\n\r\n            if (!response.ok) {\r\n                throw new Error(data.message || 'Something was wrong')\r\n            } \r\n\r\n            setLoading(false)\r\n\r\n            return data\r\n        }catch (e) {\r\n            setLoading(false)\r\n            setError(e.message)\r\n            throw e\r\n        }\r\n    }, [])\r\n\r\n    const clearError = () => setError(null)\r\n\r\n    // const clearError = useCallback(() => setError(null), [])\r\n\r\n    return { loading, request, error, clearError}\r\n}","import React from 'react';\r\n\r\nimport './loader.scss'\r\n\r\nexport const Loader = () => {\r\n    return (\r\n        <div className=\"wrap-loader\">\r\n            <div className=\"lds-dual-ring\"></div>\r\n        </div>\r\n    )\r\n}","import React  from 'react';\r\n\r\nexport const ProfileCard = ({profile}) => {\r\n    return (\r\n        <>\r\n            <p>{profile.name}</p>\r\n            <p>{profile.email}</p>\r\n        </>\r\n    )\r\n}","import React, {useCallback, useContext, useState, useEffect} from 'react';\r\nimport {AuthContext} from '../../context/Auth.context'\r\nimport {useHttp} from '../../hooks/http.hooks'\r\n\r\nimport {Loader} from '../../components/loader/loader'\r\nimport {ProfileCard} from '../../components/profile-card/ProfileCard'\r\n\r\nimport './profile-page.scss'\r\n\r\n\r\nexport const Profile = () => {\r\n\r\n    const {loading, request} = useHttp()\r\n    const {token} = useContext(AuthContext)\r\n\r\n    const [profile, setProfile] = useState(null)\r\n\r\n    const getProfile = useCallback(async () => {\r\n        try {\r\n            const data = await request('https://tager.dev.ozitag.com/api/tager/user/profile', 'GET', null, {\r\n                Authorization: `Bearer ${token}`\r\n            })\r\n            setProfile(data.data)\r\n        } catch (e) {}\r\n    }, [token, request])\r\n\r\n    useEffect (()=> {\r\n        getProfile()\r\n    }, [getProfile])\r\n\r\n\r\n    return (\r\n        <main className=\"profile-page-wrap\">\r\n            <div className=\"profile-page\">\r\n                {\r\n                    (!loading && profile) ? <ProfileCard profile={profile}/> : <Loader/>\r\n                }\r\n            </div>\r\n        </main>\r\n    )\r\n}","import React from 'react';\r\nimport './pop-up.scss'\r\n\r\n\r\nexport const PopUp = ({popUpHandleClick, ifError}) => {\r\n    return (\r\n        <div  className={`popup${ifError ? \" popupOpen\" : \"\"}`}>\r\n            <div className=\"popup_content\">\r\n                <div className=\"popup-header\">\r\n                    <h2>Warning!</h2>\r\n                    <button \r\n                        className=\"close\"\r\n                        onClick={popUpHandleClick}>&times;</button>\r\n                </div>\r\n                <div className=\"popup-body\">\r\n                    <p>{ifError}</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React, {useContext} from 'react'\r\nimport { Formik  } from 'formik';\r\nimport * as yup from 'yup';\r\n\r\nimport {PopUp} from '../../components/pop-up/pop-up'\r\nimport {useHttp} from '../../hooks/http.hooks'\r\nimport {AuthContext} from '../../context/Auth.context'\r\n\r\nimport './form-contact.scss';\r\nimport './wrap-contactpage.scss';\r\nimport './wrap-form.scss'\r\n\r\nexport const Login = () => {\r\n    const auth = useContext(AuthContext)\r\n\r\n    const { loading, request, error, clearError} = useHttp()\r\n\r\n    const popUpHandleClick = () => {\r\n        if (error) {\r\n            clearError()\r\n        }\r\n    }\r\n\r\n    const validationSchema = yup.object().shape({\r\n        email: yup.string().email().required(),\r\n        password: yup.string().required().min(4),\r\n    });\r\n    \r\n\r\n    return (\r\n        <>\r\n        <PopUp \r\n            ifError={error}\r\n            popUpHandleClick={popUpHandleClick}/>\r\n\r\n        <main className=\"wrap-contactpage\">\r\n            <div className=\"wrap-form-contact\">\r\n                <Formik\r\n                    initialValues={{\r\n                        email: 'user@ozitag.com',\r\n                        password: 'user',\r\n                    }}\r\n                    validateOnBlur\r\n                    validationSchema={validationSchema}\r\n                    onSubmit={async (values) => {\r\n                        try{\r\n                            const {email, password} = values\r\n                            const data = await request('https://tager.dev.ozitag.com/api/auth/user', 'POST', {email, password, clientId: 1});\r\n                            // console.log(data.data.accessToken)\r\n                            auth.login(data.data.accessToken)\r\n                        }catch(e){}\r\n                    }}\r\n                >\r\n                    {({values, errors, handleChange, handleBlur, isValid, handleSubmit}) => (\r\n                        <form className=\"form-contact\">\r\n                            <div className=\"form-contact__group\">\r\n                                <input \r\n                                    type=\"email\" \r\n                                    className={`form-contact__group__input${errors.email ? \" form-contact__group__input__error\" : \"\"}`}\r\n                                    name=\"email\"\r\n                                    value={values.email}\r\n                                    id=\"email\" \r\n                                    placeholder=\"Email\"\r\n                                    onChange={handleChange}\r\n                                    onBlur={handleBlur}\r\n                                    />\r\n                                <label\r\n                                    htmlFor=\"email\"\r\n                                    className=\"form-contact__group__label\">Email</label>\r\n                            </div>\r\n                            <div className=\"form-contact__group\">\r\n                                <input \r\n                                    type=\"password\" \r\n                                    className={`form-contact__group__input${errors.password ? \" form-contact__group__input__error\" : \"\"}`}\r\n                                    id=\"password\" \r\n                                    placeholder=\"Password\" \r\n                                    name=\"password\"\r\n                                    value={values.password}\r\n                                    onChange={handleChange}\r\n                                    onBlur={handleBlur}\r\n                                    />\r\n                                <label\r\n                                    htmlFor=\"name\"\r\n                                    className=\"form-contact__group__label\">Password</label>\r\n                            </div>\r\n                            <button \r\n                                type=\"submit\" \r\n                                className=\"form-contact__button\"\r\n                                disabled={!isValid || loading}\r\n                                onClick={handleSubmit}\r\n                            >Sign In</button>\r\n                        </form>\r\n                    )}\r\n                </Formik>\r\n            </div>\r\n        </main>\r\n        </>\r\n    )\r\n}","import React, {useContext} from 'react';\r\nimport './header.scss'\r\nimport {Link} from 'react-router-dom'\r\nimport {useHttp} from '../../hooks/http.hooks'\r\nimport {AuthContext} from '../../context/Auth.context'\r\n\r\nexport const Header = ({isAuthenticated}) => {\r\n    const auth = useContext(AuthContext)\r\n    const { loading, request} = useHttp()\r\n    \r\n\r\n    const logoutHandler = async () => {\r\n        try{\r\n            const data = await request('https://tager.dev.ozitag.com/api/tager/user/profile/logout', 'POST', null, {Authorization: `Bearer ${auth.token}`});\r\n            auth.logout(data.success)\r\n        }catch(e){}\r\n    }\r\n\r\n    console.log(\"токен\",auth.token)\r\n    return (\r\n        <header className='header'>\r\n            <nav className=\"header__nav\">\r\n                {isAuthenticated ? \r\n                    <button \r\n                        className='header__button' \r\n                        disabled={loading}\r\n                        onClick={logoutHandler}>\r\n                        Logout\r\n                    </button>\r\n                :  \r\n                    <div className='header__button'\r\n                    >\r\n                        <Link className=\"nav-link nav-text\" to='/'>Login</Link>\r\n                    </div>\r\n                }\r\n            </nav>\r\n        </header>\r\n    )\r\n} ","import React from 'react';\n// import {Redirect, Route, Switch} from 'react-router-dom';\nimport {useRoutes} from '../routes/routes'\nimport {Header} from '../header/Header'\nimport {useAuth} from '../../hooks/auth.hooks'\nimport {AuthContext} from '../../context/Auth.context'\n\nfunction App() {\n\n  const {login, logout, token} = useAuth()\n\n  const isAuthenticated = !!token; // Boolean(value)\n\n  const routes = useRoutes(isAuthenticated)\n\n  return (\n    <AuthContext.Provider value={{ login, logout, token, isAuthenticated}}>\n      <Header isAuthenticated={isAuthenticated} />\n      {routes}\n    </AuthContext.Provider>\n  );\n}\n\nexport default App\n","import {useState, useCallback, useEffect} from 'react';\r\n\r\n\r\nexport const useAuth = () => {\r\n\r\n    const [token, setToken] = useState(null)\r\n    const storageName = \"accessToken\"\r\n\r\n    const login = useCallback((accessToken) => {\r\n        setToken(accessToken)\r\n        localStorage.setItem(storageName, JSON.stringify({token: accessToken}))\r\n        \r\n    }, [])\r\n\r\n    const logout = useCallback((success)=> {\r\n        if (success) {\r\n            setToken(null)\r\n            localStorage.removeItem(storageName)\r\n        }\r\n    }, [])\r\n\r\n    console.log(token)\r\n\r\n    useEffect(()=> {\r\n        const data = JSON.parse(localStorage.getItem(storageName))\r\n        if (data && data.token) {\r\n            login(data.token);\r\n        }\r\n        \r\n    }, [login])\r\n\r\n    return {login, logout, token}\r\n}","\r\nimport React from 'react'\r\nimport {Switch, Route, Redirect} from 'react-router-dom'\r\nimport {Profile} from '../../pages/profile/Profile'\r\nimport {Login} from '../../pages/login/Login'\r\n\r\nexport const useRoutes = (isAuthenticated) => {\r\n    if (isAuthenticated) {\r\n        return (\r\n        <Switch>\r\n            <Route path=\"/profile\">\r\n                <Profile/>\r\n            </Route>\r\n                <Redirect to=\"/profile\" />\r\n        </Switch>\r\n        )\r\n    }\r\n    return (\r\n        <Switch>\r\n            <Route path=\"/\" exact>\r\n                <Login/>\r\n            </Route>\r\n                <Redirect to=\"/\" />\r\n        </Switch>\r\n    )\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport './styles/index.scss';\nimport App from './components/app/App';\n\n\nReactDOM.render(\n  <Router basename=\"/auth_task\">\n    <App />\n  </Router>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}